{
  "index.html": {
    "href": "index.html",
    "title": "PLATEAU TwinLink | PLATEAU TwinLink",
    "keywords": "PLATEAU TwinLink 「3D都市モデル」、「BIMモデル」、「空間ID」を統合した都市開発支援ツールであり、都市計画の検討や都市開発のプロポーザル、建築設計の合意形成、シティプロモーションなど、まちづくりの各フェーズで利用することが可能です。 本ツールのソースコードについてはGitHubを参照してください。"
  },
  "manual/DataSettings.html": {
    "href": "manual/DataSettings.html",
    "title": "表示データの設定方法（管理者用画面） | PLATEAU TwinLink",
    "keywords": "表示データの設定方法（管理者用画面） 1 本書について 本書では、PLATEAU TwinLink（以下「本ツール」という。）で扱うデータを、管理者が登録・変更する手順について記載しています。 2 使い方 本ツールの実行ファイルを実行すると以下のメイン画面が表示されます。 メイン画面右上の歯車ボタンを押すと、管理モード切替ボタンが表示されます。管理モードをONにすると管理者パスワード入力パネルが表示されるため、パスワード（PIN）を入力すると、管理モードに入れます。以後、表示データの設定は管理モードで行います。 2-1 建物内施設情報の登録 店舗情報を追加したいフロアを画面左のフロアリストから選択します。店舗の位置をクリックすると、店舗情報登録画面が表示されるので、以下の項目を入力して登録ボタンを押します。 店舗名 店舗の表示名を設定します。 店舗カテゴリ 店舗リストで表示されるカテゴリを設定します。 例）飲食店、物品販売店 店舗画像 店舗情報で表示する画像を設定します。 営業時間 店舗情報で表示する営業時間を設定します。 店舗案内 店舗情報で表示する店舗案内を設定します。 例）住所、駐車場の有無 2-2 建物内設計情報の登録 店舗情報を追加したいフロアを画面左のフロアリストから選択します。画面左下の「設計情報表示」を選択すると、登録されている設計情報とデータ読込み画面が表示されます。設計情報を登録したい場合は、データを選択して登録してください。 2-3 周辺施設情報の登録 画面上部メニューの「周辺案内」を選択します。登録したい施設をクリックしてから、画面左にある「施設登録」を選択すると、周辺施設情報追加画面が表示されます。以下の項目を入力して、登録するボタンを押してください。 施設名 施設の表示名を設定します。 施設タイプ 施設一覧で表示されるタイプを設定します。 例）商業施設、交通施設 施設画像 施設情報で表示される画像を設定します。 建物案内 施設情報で表示される建物案内を設定します。 例）48階建ての超高層ビル スポット情報 例）住所、営業時間 登録が成功すると、画面左の周辺施設一覧に施設名が追加されます。 2-4 視点の登録 登録したい視点に移動してから、画面左下の「視点追加」を選択します。視点名を入力して、追加を選択します。 登録された視点は、左下のカメラ視点リストに表示され、選択するとその視点に移動します。 2-5 建物の色彩変更 画面上部メニューの「地図編集」>「色彩変更」を選択します。画面左下のマテリアル一覧から編集したいマテリアルを選択すると、マテリアル編集画面が表示されます。以下の項目を編集し、登録するボタンを選択すると、建物の色彩が変更されます。 Diffuse（色合い） RGBの数値をそれぞれ0～255の範囲で設定します。 Specular（鏡面反射） 0～255の範囲で設定します。 Emissive（発光） RGBの数値をそれぞれ0～255の範囲で設定します。 Shininess（ハイライト） 0～255の範囲で設定します。 Transparency（透過性） 0.0～1.0の範囲で設定します。 2-6 アセットの配置 画面上部メニューの「地図編集」>「アセット」を選択します。画面右のアセットライブラリから追加したいアセットを選択して、設置してください。 設置したアセットを選択すると回転移動ができ、右クリックすると平行移動できます。"
  },
  "manual/HowToUse.html": {
    "href": "manual/HowToUse.html",
    "title": "各機能の利用方法（ユーザー用画面） | PLATEAU TwinLink",
    "keywords": "各機能の利用方法（ユーザー用画面） 1 本書について 本書では、PLATEAU TwinLink（以下「本ツール」という。）の操作手順について記載しています。 2 使い方 2-1 メイン画面 本ツールの実行ファイルを実行すると以下のメイン画面が表示されます。メイン画面では、3D ビュー上で表現されたデジタルツイン表示の上に、以下の機能切替ボタンが表示されます。 建物案内 周辺案内 経路案内 解析 各機能切替ボタンを押すと各機能の画面が開きます。機能画面が開いている状態でボタンを押す、又は別の機能切替ボタンを押すと機能画面が閉じます。 2-2 建物案内画面 建物案内画面を開くと、3Dビューの視点が建物に移動し、以下の情報が表示されます。 ①建物の名称及び外観 ②フロア選択パネル ③店舗情報表示パネル ④表示階層の切替えパネル ②フロア選択パネルで閲覧したいフロアを選択すると、3Dモデルからそのフロアが切り取られます。このフロアに登録されている店舗は、3Dビュー上に名称と位置が表示され、③店舗情報表示パネルに店舗名がリストアップされます。また、④表示階層の切替えパネルにより、選択しているフロアから上下のフロアに移動できます。 ③店舗情報表示パネルで、店舗名を選択すると、店舗を中心とした俯瞰視点に切り替わり、店舗情報パネル（店舗名、画像、営業時間、店舗案内）が表示されます。また、「設計情報表示」ボタンを押すと、フロアに設定された設計情報が表示されます。 2-3 周辺案内画面 周辺案内画面を開くと、以下の情報が表示されます。 ①周辺施設一覧パネル ②視点切替パネル 視点を選択すると、カメラの位置と画角が移動します。 ③周辺施設情報表示パネル ①周辺施設一覧パネルから閲覧したい施設を選択すると、③周辺施設情報表示パネルが表示されます。③周辺施設情報表示パネルでは、施設についての案内と、施設周辺の情報を閲覧できます。 2-4 経路案内画面 経路案内画面を開くと、3D ビューは管理対象建築物を中心とした俯瞰視点に切り替わり、以下の情報が表示されます。 ①目標地点登録パネル ②経路案内パネル 目標地点を①目標地点登録パネル又は3Dビュー上から選択することで、管理対象建築物からの移動ルートが表示されます。 ②経路案内パネルの中段にある「徒歩」、「車」ボタンを選択することで、移動方法の切替えができ、移動時間が再計算されます。 ②経路案内パネルの上段にある「人流データ表示」ボタンをONに設定すると、人流データが混雑情報としてヒートマップで表示されます。ヒートマップは描画距離が近くなるほど高解像度になるように自動的に更新されます。 2-5 解析画面 解析画面を開くと、以下の機能切替ボタンが表示されます。 経路 空間ID 気象 POI 都市計画 各機能切替ボタンを押すと各機能の画面が開きます。機能画面が開いている状態でボタンを押す、又は別の機能切替ボタンを押すと機能画面が閉じます。 2-5-1 経路画面 経路画面では、出発地点→目標地点の順で3D マップ上の地点を選択すると、ルート検索と距離・移動時間の計測が行われます。また、移動方法は「徒歩」および「車」ボタンを選択して変更できます。 経路情報は、エクスポートボタンを選択すると、Shapefile として出力できます。 2-5-2 空間ID画面 空間ID画面では、3Dマップ上の調べたいエリアを選択すると、赤色のボクセルが表示され、解析情報パネルにはそのボクセル内の以下の情報が表示されます。 通行人数 建築物数 解析情報パネルの上部にあるズームレベルスライダーから、解析範囲を表すボックスのサイズを変更できます。 解析情報パネルの上部にある人流データ切替ボタンから、人流データ（混雑状況を表したヒートマップ）の表示を選択できます。 画面下部にある日時変更パネルでは、スライダーを操作することで、解析対象の日時を変更できます。また、「リアルタイム」チェックボックスを選択すると、最新の情報をリアルタイムに解析することが可能です。 2-5-3 気象画面 気象データ表示画面では、気象データパネルの「データを選択」ボタンからエクスプローラーを開き、可視化したい気象データを選択します。 気象データが読み込まれると、3Dビュー上に各センサーで計測された気温、照度、雨量、湿度、風向、気圧などが表示されます。また、気象データパネルの「データ読み込み」欄では、読み込まれたデータ名が確認できます。 画面下部にある日時変更パネルでは、スライダーを操作することで、表示する気象データの日時を変更できます。 2-5-4 POI画面 POI画面では、GISデータを読み込んで各地点情報を3Dビュー上に可視化できます。 まず、GISデータパネルの「データ選択」ボタンからエクスプローラを開き、可視化したいGISデータ（Shapefile）を選択します。 次に、GISデータパネルの「表示属性リスト」から、3D ビュー上で表示したい属性を選択します。dbf ファイル（Shapefile と同名のファイルが自動的に読み込まれます）に定義された属性フィールドのリストが、表示属性リストに表示されます。 そして、GISデータパネルの「データ名」欄に施設の名称を入力します。 最後に、GISデータパネルの「登録」ボタンを押すと、3Dマップ上にアイコンとGISデータが表示されます。また、画面左側の周辺施設一覧には設定したデータ名でGISデータがリストアップされます。データ名の横にある瞳の形状のアイコンで、表示と非表示を選択でき、ゴミ箱の形状のアイコンで削除ができます。 2-5-5 都市計画画面 都市計画画面では、PLATEAU SDK でインポートされた都市計画決定情報モデル（CityGML形式）をもとに、以下の機能を提供します。 各都市計画決定情報を用途別に色分けし、エリア一覧パネルに表示する 3D ビュー上の各エリアを色分けする エリア端のエフェクトの高さによって容積率を可視化する 3D ビュー上でエリア端を選択すると、画面右下のエリア情報パネルに、そのエリアの用途と容積率が表示されます。"
  },
  "manual/Setup.html": {
    "href": "manual/Setup.html",
    "title": "環境構築手順書 | PLATEAU TwinLink",
    "keywords": "環境構築手順書 1 本書について 本書では、PLATEAU Twinlink（以下「本ツール」という。）の環境構築手順について記載しています。本システムの構成や仕様の詳細については技術検証レポートも参考にしてください。 2 動作環境 本ツールの動作環境は以下のとおりです。 項目 推奨動作環境 OS Microsoft Windows 11 CPU Intel Core i9-12900H以上 GPU NVIDIA GeForce RTX3080 Ti Laptop以上 メモリ 32GB以上 3 データの準備 本ツールの動作には、LOD4の建築物モデルが必要です。LOD4建築物モデルとは、3D都市モデル整備のためのBIM活用マニュアルに従って作成されたIFCファイルをIFC to CityGMLで変換したものです。詳細についてはIFC to CityGMLのページをご参照ください。 LOD4建築物モデルは新規に作成する以外にも、オープンデータとして提供されている既存のファイルを活用することができます。 4 インストール手順 Unreal Engine Epic Games StoreからEpic Games Launcherをインストール後、Epic Games Launcherを開きます。Unreal Engine（①）→ライブラリ（②）→＋（③）を選択し、Unreal Engine 5.3をインストールしてください。 インストールされたUnreal Engineを開き、プロジェクトデフォルトとしてブループリントではなくC++を選択してから作成します。 PLATEAU SDK及びPLATEAU TwinLink PLATEAU SDK及び本ツールのリリースページから各プラグインのzipファイルをダウンロードしてください。作成したプロジェクトのフォルダを開き、Pluginsという名前のフォルダを作成後、各zipファイルを展開して格納します。 5 Unreal Engineのレベル作成手順 ゲームモードの設定 「World Settings」を押下した後、「GameMode Override」の値を「TwinLinkGameMode」に設定します。 3D都市モデルのインポート PLATEAU SDK から使用したい3D都市モデルをインポートします。インポート方法についてはPLATEAU SDK のマニュアルを参照してください。 TwinLinkの設定 上部メニューから「PLATEAU TwinLink」を選択すると、設定ウィンドウが開きます。 まず「フォーカス対象建築物インポート」からLOD4の建築物を以下の手順でインポートします。 参照ボタンを押した後、エクスプローラからCityGMLファイルを選択します。 インポートボタンを押します。 インポートが完了すると「インポート完了」と表示されます。 描画設定では、以下の項目の設定が可能です。 環境設定 環境設定にチェックを入れることで、時間帯と月を指定できます。 カリング設定 遠距離のオブジェクトを非表示にしたい場合はこの項目にチェックを入れます。 LOD1の広範囲地図の読み込み インポートした3D都市モデルより広範囲の地形モデルが追加でインポートされます。 下部の「適用」ボタンを押すことでチェックが入れられた描画設定が反映されます。 「データ生成」項目では、3D都市モデルとフォーカス対象建築物（FocusTargetという名前でインポートされています）のアクターを選択し、下部の実行ボタンを押すとツールの実行に必要なデータの生成が行われます。 生成が完了すると「データの生成が完了しました。」と表示されます。 管理者PIN設定では、空欄に数字4文字を入力し、設定ボタンを押すことで、管理モードに入るためのPINを設定できます。PLATEAU TwinLinkウィンドウを閉じて再生ボタンを押すと、先ほど設定した内容でシーンを再生できます。 ビルドアプリの作成 スタンドアロンで実行可能なexeファイルを生成する方法について記載します。 プロジェクト設定からGame Default Mapを作成したシーンに設定します。 プラットフォーム→Windows→パッケージ化の順に選択し、ビルドアプリを作成します。"
  },
  "manual/devMan.html": {
    "href": "manual/devMan.html",
    "title": "環境構築手順書 | PLATEAU TwinLink",
    "keywords": "環境構築手順書 1 本書について 本書では、TwinLinkシステム（以下「本システム」という。）で使用する外部空間IDデータ連携機能の利用環境構築手順について記載しています。本システムの構成や仕様の詳細については以下も参考にしてください。 技術検証レポート 2 動作環境 本システムの動作環境は以下のとおりです。 項目 最小動作環境 推奨動作環境 OS macOS Monterey以上 同左 CPU Intel Core i3以上またはApple M1以上 同左 ライブラリ docker及びNode.js 18.0.0以上 同左 メモリ 8GB以上 同左 ネットワーク 【データ取得】 カメラデータを配信するSFTPサーバーが許可しているIPアドレスからリクエストできるネットワーク環境が必要 【集計データ配信】 不要 同左 3 ビルド手順 自身でソースファイルをダウンロードしdocker imageのビルドを行うことで、実行することができます。 ソースファイルはこちらをご利用ください。 サーバーは３つあります。 SFTPサーバーからデータを取得、集計してMongoDBに保存するサーバー MongoDBに保存された集計データを配信するサーバー MongoDBサーバー データ取得サーバーImageのビルド Terminalからソースコードのserverディレクトに移動します。 npm run build && docker build -t batch -f ./Dockerfile.batch . 配信サーバーImageのビルド Terminalからソースコードのserverディレクトに移動します。 npm run build && docker build -t server -f ./Dockerfile . MongoDBサーバーのビルド Terminalからソースコードのrootディレクトに移動します。 docker compose build 4 準備物一覧 アプリケーションを利用するために以下のデータを入手します。 これらを準備したのち環境変数として設定します。 またこれら以外に指定できる環境変数はこちらのソースコードを参照ください。 データ種別 環境変数 key 名 値サンプル ① SFTPサーバーのIPアドレス SFTP_HOST 192.168.0.0 ② SFTPサーバーのSFTP PORT SFTP_PORT 22 ③ SFTPサーバーにSFTP通信できるUSER_NAME SFTP_USERNAME test-user ④ SFTPサーバーにSFTP通信できるPASSPHRASE SFTP_PASSPHRASE passphrase ⑤ SFTPサーバーにSFTP通信できる秘密鍵(pem形式) SFTP_PRIVATE_KEY ⑥ MongoDBのURI MONGO_URI mongodb://root:example@127.0.0.1:27017 ⑦ MongoDBのデータベース名 MONGO_DB_NAME common ⑧ カメラデータと位置情報のJSONデータ CAMERAS [{\"id\":\"1\",\"name\":\"西新宿 001\",\"lat\":35.691149,\"lng\":139.695587,\"height\":0}, {\"id\":\"2\",\"name\":\"西新宿 002\",\"lat\":35.691149,\"lng\":139.695587,\"height\":0}] ⑨ 利用するデータベースの種別 (mongo/mock/inMemory) DATABASE_TYPE mongo 5 サーバーの起動 MongoDBサーバーの起動 Terminalからソースコードのrootディレクトに移動します。 docker compose up -d データ取得サーバーの実行 Terminalからソースコードのserverディレクトに移動します。 ⑤の環境変数を設定します。 docker run -it batch 配信サーバーの起動 Terminalからソースコードのserverディレクトに移動する ⑤の環境変数を設定する docker run -it server"
  },
  "manual/userMan.html": {
    "href": "manual/userMan.html",
    "title": "操作マニュアル | PLATEAU TwinLink",
    "keywords": "操作マニュアル 1 本書について 本書では、TwinLinkシステム（以下「本システム」という。）で使用する外部空間IDデータ連携機能の操作手順について記載しています。 2 使い方 2-1 リクエスト送信（空間IDにひも付く人流データの一覧取得） 本システムの外部空間IDデータ連携機能サーバへ以下のリクエストを送信します。 HTTPメソッド：GET, POST リクエストURL：/population リクエストパラメータ パラメータ名 内容 必須条件 備考 spatialId 空間ID YES カンマ区切りで複数指定可能 time 取得対象の日時 NO 日時はRFC3339 formatで指定してください 日付を指定しない場合、最新のデータが返されます 上記リクエストを送信すると、人流データが返却されます。 リクエストのイメージは以下のとおりです。 GETの場合 /population?spatialId=\"/15/0/1111/1111,/15/0/2222/2222,/15/0/3333/3333”&time=2023-09-14T15:59:50+09 POSTの場合 { \"spatialId\":\"/15/0/1111/1111,/15/0/2222/2222,/15/0/3333/3333\", \"time\":\"2023-09-14T15:59:50+09:00\" } 3 出力データ 外部空間IDデータ連携機能（空間IDにひも付くデータの一覧取得）で出力されるデータは以下のとおりです。 機能 出力データ 内容 データ形式 外部空間IDデータ連携 人流データ 空間IDにひも付く人流データの一覧 JSON 3-1 人流データ 指定された空間ID及び指定された日時の空間IDにひも付く人流データを出力します。 キー名 内容 備考 data レスポンスデータの構造体 id 指定された空間ID type 取得された人流データの種類（実測値/補完値） \"measured\"：実測データ \"interpolated\"：補完データ values 特定の空間IDと日時に存在する人流データの構造体 リクエストで指定した空間ID分出力されます timestamp 人流データ取得対象の日時 unit 人流データの集計時間 \"minutes\"固定 peopleFlow 特定の空間IDと日時に存在する人流データ レスポンスのイメージは以下のとおりです。 { \"data\": [ { \"id\": \"/15/0/1111/1111\", \"type\": \"measured\" //実測データ \"values\": [ { \"timestamp\": \"2023-09-14T15:59:50+09:00\", \"unit\": \"minutes\", \"peopleFlow\": 100, }, ] }, { \"id\": \"/15/0/2222/2222\", \"type\": \"interpolated\" //補完データ \"values\": [ { \"timestamp\": \"2023-09-14T15:59:50+09:00\", \"unit\": \"minutes\", \"peopleFlow\": 100, }, ] } ... ] }"
  }
}